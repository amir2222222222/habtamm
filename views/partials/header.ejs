<!DOCTYPE html>
<html lang="en">

<head>
 
  <script>
    (function () {
      var themes = {
        "soft-neutral": ['#f5f7fa', '#1e293b', '#3b82f6', '#ccc'],
        "warm": ['#ffedd5', '#7c2d12', '#ea580c', '#fbbf24'],
        "calm": ['#f1f5f9', '#1e3a8a', '#0ea5e9', '#93c5fd'],
        "earthy": ['#fefce8', '#365314', '#84cc16', '#d9f99d'],
        "indigo": ['#c7d2fe', '#312e81', '#6366f1', '#a5b4fc'],
        "sunset-glow": ['#fff1e6', '#5b21b6', '#f97316', '#f59e0b'],
        "mint-cream": ['#e6fff7', '#1f2937', '#10b981', '#34d399'],
        "blush-rose": ['#fdf2f8', '#1e1b4b', '#f472b6', '#e879f9'],
        "deep-ocean": ['#0f172a', '#e0f2fe', '#0891b2', '#0ea5e9'],
        "cyber-neon": ['#0d0c1d', '#f0f0f0', '#f43f5e', '#22d3ee']
      };

      var name = localStorage.getItem('theme');
      if (name && themes[name]) {
        var [bg, text, accent, border] = themes[name];
        var doc = document.documentElement.style;
        doc.setProperty('--bg-color', bg);
        doc.setProperty('--text-color', text);
        doc.setProperty('--accent-color', accent);
        doc.setProperty('--border-color', border);

        // Optional short variable support
        doc.setProperty('--short-asset-color', accent);
        doc.setProperty('--short-text-color', text);
      }

      if (localStorage.getItem('dark-mode') === 'true') {
        document.body.classList.add('dark-mode'); // change from documentElement to body for consistency
      }
    })();
  </script>
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard Header</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Poppins:wght@400;600&display=swap"
    rel="stylesheet" />
  <style>
    :root {
      --bg-color: #f5f7fa;
      --text-color: #1e293b;
      --accent-color: #3b82f6;
      --border-color: #ccc;
    }

    .dark-mode {
      --bg-color: #0f172a;
      --text-color: #ffffff;
      --accent-color: #6366f1;
      --border-color: #64748b;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }


    header {
      display: grid;
      grid-template-columns: 1fr 2fr 1.2fr;
      align-items: end;
      justify-items: center;
      background-color: var(--bg-color);
      border-bottom: 2px solid var(--border-color);
      position: sticky;
      top: 0;
      z-index: 1000;
      transition: background-color 0.3s ease;
    }

    .brand {
      font-size: 30px;
      font-family: 'Orbitron', sans-serif;
      font-weight: 900;
      display: flex;
      align-items: center;
      padding: 8px 20px;
      border-radius: 14px;
      color: var(--text-color);
      transition: color 0.3s ease;
    }

    .brand span:last-child {
      font-family: 'Poppins', sans-serif;
      margin-left: 5px;
      font-weight: 600;
    }

    nav.nav {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      justify-content: center;
      margin-top: 10px;
    }

    nav.nav a {
      font-size: 17px;
      text-decoration: none;
      color: var(--text-color);
      padding-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 5px;
      position: relative;
      transition: color 0.2s ease;
    }

    nav.nav a::after {
      content: "";
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 0%;
      height: 2px;
      background: var(--text-color);
      transition: width 0.3s ease;
    }

    nav.nav a:hover,
    nav.nav a.active {
      color: var(--accent-color);
    }

    nav.nav a:hover::after,
    nav.nav a.active::after {
      width: 100%;
    }

    .actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      align-items: center;
      height: 100%;
    }

    .balance-text {
      font-weight: 600;
      color: var(--text-color);
      padding: 6px 14px;
      cursor: pointer;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      transition: all 0.3s ease;
    }

    .balance-text:hover {
      background-color: var(--accent-color);
      color: #fff;
    }

    .logout-button {
      background-color: red;
      border: none;
      color: white;
      padding: 6px 14px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      display: flex;
      align-items: center;
      transition: background-color 0.2s ease, box-shadow 0.2s ease;
    }

    .logout-button i {
      margin-right: 6px;
    }

    .logout-button:hover {
      background-color: black;
      box-shadow: inset 0 0 0 2px var(--accent-color);
    }

    .theme-toggle {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .theme-select {
      padding: 6px 12px;
      border-radius: 10px;
      border: 1px solid var(--border-color);
      font-size: 14px;
      background-color: var(--bg-color);
      color: var(--text-color);
      box-shadow: inset 1px 1px 2px rgba(0, 0, 0, 0.05);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .theme-select:hover,
    .theme-select:focus {
      outline: none;
      border-color: var(--accent-color);
    }

    .dark-toggle {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background-color: transparent;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid var(--border-color);
      cursor: pointer;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }

    .dark-toggle i {
      font-size: 16px;
      color: var(--text-color);
    }

    .dark-mode .dark-toggle i {
      color: #facc15;
    }

    @media (max-width: 768px) {
      .brand {
        font-size: 22px;
        padding: 6px 12px;
      }

      nav.nav {
        gap: 12px;
        margin-top: 8px;
      }

      .balance-text,
      .logout-button {
        font-size: 13px;
        padding: 5px 10px;
      }

      .theme-select {
        font-size: 12px;
        padding: 4px 8px;
      }

      .dark-toggle {
        width: 30px;
        height: 30px;
      }

      .dark-toggle i {
        font-size: 14px;
      }
    }
  </style>
</head>

<body>
  <header>
    <div class="brand">
      <i class="fas fa-dice"></i><span>Habtam</span><span>Bingo</span>
    </div>

    <nav class="nav">
      <a href="/home"><i class="fas fa-home"></i>Home</a>
      <a href="/profile"><i class="fas fa-user"></i>Profile</a>
      <a href="/status"><i class="fas fa-signal"></i>Status</a>
      <a href="/games"><i class="fas fa-gamepad"></i>Games</a>
      <a href="/setting"><i class="fas fa-cog"></i>Setting</a>
    </nav>

    <div class="actions">
      <div class="balance-text" onclick="toggleBalance()">Balance</div>
      <form action="/logout" method="POST">
        <button type="submit" class="logout-button"><i class="fas fa-sign-out-alt"></i>Log Out</button>
      </form>
      <div class="theme-toggle">
        <select id="themeSelect" class="theme-select">
          <option value="soft-neutral">Soft Neutral</option>
          <option value="warm">Warm</option>
          <option value="calm">Calm</option>
          <option value="earthy">Earthy</option>
          <option value="indigo">Indigo</option>
        
          <!-- New -->
          <option value="sunset-glow">Sunset Glow</option>
          <option value="mint-cream">Mint Cream</option>
          <option value="blush-rose">Blush Rose</option>
          <option value="deep-ocean">Deep Ocean</option>
          <option value="cyber-neon">Cyber Neon</option>
        </select>
        
        <div class="dark-toggle" id="darkToggle">
          <i class="fas fa-sun" id="modeIcon"></i>
        </div>
      </div>
    </div>
  </header>

  <script>
    const themeSelect = document.getElementById("themeSelect");
    const darkToggle = document.getElementById("darkToggle");
    const modeIcon = document.getElementById("modeIcon");

    const themes = {
      "soft-neutral": ['#f5f7fa', '#1e293b', '#3b82f6', '#ccc'],
      "warm": ['#ffedd5', '#7c2d12', '#ea580c', '#fbbf24'],
      "calm": ['#f1f5f9', '#1e3a8a', '#0ea5e9', '#93c5fd'],
      "earthy": ['#fefce8', '#365314', '#84cc16', '#d9f99d'],
      "indigo": ['#c7d2fe', '#312e81', '#6366f1', '#a5b4fc'],
      "sunset-glow": ['#fff1e6', '#5b21b6', '#f97316', '#f59e0b'],
      "mint-cream": ['#e6fff7', '#1f2937', '#10b981', '#34d399'],
      "blush-rose": ['#fdf2f8', '#1e1b4b', '#f472b6', '#e879f9'],
      "deep-ocean": ['#0f172a', '#e0f2fe', '#0891b2', '#0ea5e9'],
      "cyber-neon": ['#0d0c1d', '#f0f0f0', '#f43f5e', '#22d3ee'],
    };

    function applyTheme(name) {
      const [bg, text, accent, border] = themes[name] || themes["soft-neutral"];
      document.documentElement.style.setProperty('--bg-color', bg);
      document.documentElement.style.setProperty('--text-color', text);
      document.documentElement.style.setProperty('--accent-color', accent);
      document.documentElement.style.setProperty('--border-color', border);
      document.documentElement.style.setProperty('--short-asset-color', accent);
      document.documentElement.style.setProperty('--short-text-color', text);
    }

    if (themeSelect) {
      themeSelect.addEventListener("change", (e) => {
        const theme = e.target.value;
        applyTheme(theme);
        localStorage.setItem("theme", theme); // ✅ Save selected theme
      });
    }

    if (darkToggle && modeIcon) {
      darkToggle.addEventListener("click", () => {
        const isDark = document.body.classList.toggle("dark-mode"); // ✅ Use toggle
        localStorage.setItem("dark-mode", isDark);                  // ✅ Save boolean
        modeIcon.className = isDark ? "fas fa-moon" : "fas fa-sun"; // ✅ Update icon
      });
    }

    let balanceVisible = false;

    async function toggleBalance() {
      const balanceText = document.querySelector(".balance-text");
      if (balanceVisible) {
        balanceText.textContent = "Balance";
        balanceVisible = false;
        return;
      }
      try {
        const response = await fetch("/balance");
        const data = await response.json();
        balanceText.textContent = data.balance ? `${data.balance.toLocaleString()}$` : "Birr 0";
      } catch {
        balanceText.textContent = "Error";
      }
      balanceVisible = true;
    }

    document.addEventListener("DOMContentLoaded", () => {
      // Highlight active nav link
      const path = window.location.pathname;
      document.querySelectorAll("nav.nav a").forEach(link => {
        if (link.getAttribute("href") === path) {
          link.classList.add("active");
        }
      });

      // Restore theme and dark mode
      const savedTheme = localStorage.getItem("theme") || "soft-neutral";
      const isDarkMode = localStorage.getItem("dark-mode") === "true";

      applyTheme(savedTheme);
      if (themeSelect) themeSelect.value = savedTheme;

      if (isDarkMode) {
        document.body.classList.add("dark-mode");
        if (modeIcon) modeIcon.className = "fas fa-moon";
      } else {
        if (modeIcon) modeIcon.className = "fas fa-sun";
      }
    });
  </script>
  
</body>

</html>